<html>
<head><meta name="generator" content="Hexo 3.9.0">
    
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="快陪练技术部">
<meta name="description" content="generateBefore

事件监听器和函数注入 

const path = require('path'); hexo.on('generateBefore', function () { }); hexo.extend.helper.register('documentCategory', function(page){ let paths = page.source.split(pat">
<meta name="keywords" content>
<title>post</title>
<link rel="icon" href type="image/ico">

<link rel="stylesheet" href="/css/uikit.min.css">
<link rel="stylesheet" href="/css/common.css">
<script src="/js/uikit.min.js"></script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>


</head>
<body>
<div id="top-menu-wrapper" uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky">
    <nav class="uk-navbar-container uk-navbar-transparent top-menu">
    <div class="uk-container">
        <div uk-navbar class="lfuture-navbar uk-navbar">
            <div class="uk-navbar-left">
                <a class="uk-navbar-item uk-logo" href="/">快陪练技术部</a>
            </div>
            <div class="uk-navbar-center">
                <ul class="uk-navbar-nav uk-visible@m">
                    
                        
                            <li class="uk-active"><a href="/">首页</a>
                        

                        
                    </li>
                    
                        
                            <li class="uk-active"><a href="/document/快速开始.html">文档</a>
                        

                        
                    </li>
                    
                        
                            <li class="uk-active"><a href="/post">博客</a>
                        

                        
                    </li>
                    
                        
                            <li class="uk-active"><a>源码</a>
                        

                        
                            <div class="uk-navbar-dropdown">
                                <ul class="uk-nav uk-navbar-dropdown-nav">
                            
                                
                                    <li class="uk-active"><a href="https://github.com/polarcloud/polardoc-demo" target="&quot;_blank&quot;">github</a></li>
                                
                            
                                
                                    <li class="uk-active"><a href="https://gitee.com/polarcloud/polardoc-demo" target="&quot;_blank&quot;">gitee</a></li>
                                
                            
                                </ul>
                            </div>
                        
                    </li>
                    
                </ul>
            </div>
            <div class="uk-navbar-right">
                <a class="uk-navbar-toggle uk-hidden@m" uk-toggle="target:#offcanvas-push" uk-navbar-toggle-icon></a>
                <div id="offcanvas-push" uk-offcanvas="mode: push;overlay: true">
                    <div class="uk-offcanvas-bar uk-flex uk-flex-column uk-text-center">

                        <button class="uk-offcanvas-close uk-close-large" type="button" uk-close></button>

                        <ul class="category-nav uk-nav uk-nav-primary uk-nav-center uk-nav-parent-icon" uk-nav>
                            
                            
                            <li class="uk-active"><a href="/">首页</a>
                                

                                
                            </li>
                            
                            
                            <li class="uk-active"><a href="/document/快速开始.html">文档</a>
                                

                                
                            </li>
                            
                            
                            <li class="uk-active"><a href="/post">博客</a>
                                

                                
                            </li>
                            
                            
                            <li class="uk-active"><a>源码</a>
                                

                                
                                    <ul class="uk-nav uk-navbar-dropdown-nav">
                                        
                                        
                                        <li class="uk-active"><a href="https://github.com/polarcloud/polardoc-demo" target="&quot;_blank&quot;">github</a></li>
                                        
                                        
                                        
                                        <li class="uk-active"><a href="https://gitee.com/polarcloud/polardoc-demo" target="&quot;_blank&quot;">gitee</a></li>
                                        
                                        
                                    </ul>
                                
                            </li>
                            
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </div>
</nav>
</div>

<link rel="stylesheet" href="/css/post.css">
<div class="blog-wrapper">
    <div class="uk-container content">
        <h2>demo</h2>
        <div class="uk-grid-small uk-grid" uk-grid>
            
            
            <div>
                <a target="_blank" href="https://github.com/yushuailiu">yushuailiu</a>
            </div>
            
            <div>
                <span class="button-span">发布于 2019-01-08 10:20:52</span>
            </div>
        </div>
        <article>
            <h2><span id="generatebefore">generateBefore</span></h2><p>事件监听器和函数注入</p>
<pre><code>const path = require(&#39;path&#39;);

hexo.on(&#39;generateBefore&#39;, function () {
});

hexo.extend.helper.register(&#39;documentCategory&#39;, function(page){

  let paths = page.source.split(path.sep);
  if (paths.length &lt; 2) {
    hexo.log.error(&quot;文档文件必须在独立的文件目录下:%s&quot;, page.source);
    process.exit();
  }
  let categoryName = paths[0];

  let key = &quot;document/&quot; + categoryName;
  console.log(page);
  if (!this.site.data || !this.site.data[key]) {
    hexo.log.error(&quot;缺失api文档目录配置文件:%s&quot;, &quot;source/_data/document/&quot; + categoryName + &quot;.json&quot;);
    process.exit();
  }
  let html = generateDocumentCategoryHtml(this.site.data[key], categoryName, &quot;&quot;);
  return html;
});

function generateDocumentCategoryHtml(categories, categoryName, html) {
  categories.forEach(function (item, i) {
    item.url = &quot;/&quot; + categoryName + &quot;/&quot; + item.file.replace(/\.[\w]+$/, &quot;.html&quot;);
    let name = item.text || item.file.replace(/\.[\w]+$/, &quot;&quot;);
    html += `&lt;li&gt; &lt;a href=&#39;${item.url}&#39;&gt;${name}&lt;/a&gt;`;

    if (item.children &amp;&amp; item.children.length) {
      html += &quot;&lt;ul&gt;&quot;;
      html = generateDocumentCategoryHtml(item.children, categoryName, html);
      html += &quot;&lt;/ul&gt;&quot;;
    }
    html += &quot;&lt;/li&gt;&quot;;
  });
  return html;
}
</code></pre>
        </article>
        <ul class="uk-pagination">
            
            
            
            <li class="uk-margin-auto-left"><a href="/2019/01/08/structure/">下一篇 <span class="uk-margin-small-left" uk-pagination-next></span></a></li>
            
        </ul>
    </div>
</div>

<link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.6.0/styles/github.min.css">
<script src="//cdn.bootcss.com/highlight.js/9.6.0/highlight.min.js"></script>
<script>
  var trim_indent = true;
  var line_number = false;
  // enable highlight
  $('pre code').each(function (i, block) {
    var texts = $(this).text().split('\n');
    // trim indent
    if (trim_indent) {
      var tab = texts[0].match(/^\s{0,}/);
      if (tab) {
        var arr = [];
        texts.forEach(function (temp) {
          arr.push(temp.replace(tab, ''));
        });
        $(this).text(arr.join('\n'));
      }
    }
    // add line number
    if (line_number) {
      var lines = texts.length - 1;
      var $numbering = $('<ul/>').addClass('pre-numbering');
      $(this).addClass('has-numbering').parent().append($numbering);
      for (i = 1; i <= lines; i++) {
        $numbering.append($('<li/>').text(i));
      }
    }
    // hightlight
    hljs.highlightBlock(block);
  });
</script>

<footer>
    <p>Copyright © 2021 快陪练技术部</p>
    <p><a href="#">ICP：Your ICP </a></p>
    <p>website version 0.0.1</p>
</footer>
</body>
</html>